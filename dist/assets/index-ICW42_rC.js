var v=(l,a)=>()=>(a||l((a={exports:{}}).exports,a),a.exports);var O=v(g=>{(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();var L=function(l,a,s,i){function t(e){return e instanceof s?e:new s(function(o){o(e)})}return new(s||(s=Promise))(function(e,o){function u(n){try{d(i.next(n))}catch(p){o(p)}}function c(n){try{d(i.throw(n))}catch(p){o(p)}}function d(n){n.done?e(n.value):t(n.value).then(u,c)}d((i=i.apply(l,a||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});const w=require("./compute"),y=require("./loadAlgo"),I=require("codemirror"),M=require("@codemirror/view"),B=require("@codemirror/lang-python");require("./styles.css");const f=require("chart.js"),C=`
s0 = (0,0)
N = 7
def play_fn(state, next_point: bool):
    if next_point:
        state = (state[0] + 1, state[1])
    else:
        state = (state[0], state[1] + 1)
    if state[0] == N:
        return GameEnd.WIN
    if state[1] == N:
        return GameEnd.LOSE
    return state
`;f.Chart.register(...f.registerables);document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("run");document.getElementById("input"),document.getElementById("output");const a=document.getElementById("balanced_p"),s=document.getElementById("fairness_p"),i=document.getElementById("expected_length_p"),t=new M.EditorView({doc:C,parent:document.getElementById("code_area"),extensions:[I.basicSetup,(0,B.python)()]}),e=document.getElementById("output_plot"),o=document.getElementById("optimality_plot"),u=new f.Chart(e,{type:"line",data:{datasets:[{label:"data",data:[{x:0,y:0},{x:1,y:1}],borderColor:"rgb(75, 192, 192)"},{label:"fairness line",data:[{x:.4,y:0},{x:.6,y:1}],borderColor:"rgb(255, 99, 132)"}]},options:{responsive:!0,aspectRatio:1,animation:!1,scales:{x:{type:"linear",position:"bottom",min:0,max:1,title:{display:!0,text:"p"}},y:{type:"linear",position:"bottom",min:0,max:1,title:{display:!0,text:"P(Match, p)"}}},elements:{point:{radius:0}},plugins:{legend:{display:!1},title:{display:!0,text:"P(Match, p)",font:{size:16},padding:{top:10,bottom:10}}}}}),c=new f.Chart(o,{data:{datasets:[{type:"scatter",label:"data",data:[{x:0,y:0}]},{type:"line",label:"threshold",data:[{x:0,y:0}],pointRadius:0}]},options:{responsive:!0,aspectRatio:1,animation:!1,scales:{x:{type:"linear",position:"bottom",min:0,title:{display:!0,text:"F(Match, 0.5)"}},y:{type:"linear",position:"bottom",min:0,title:{display:!0,text:"E(Match, 0.5)"}}},plugins:{legend:{display:!1},title:{display:!0,text:"Title",font:{size:16},padding:{top:10,bottom:10}}}}});l.addEventListener("click",()=>L(void 0,void 0,void 0,function*(){const d=yield(0,w.computeGraph)(t.state.doc.toString()),n=(0,y.fairness)(d),p=(0,y.expectedLength)(d,.5),m=(0,y.linspace)(0,1,.01),h=(0,y.probability_parallel)(d,m);u.data.datasets[0].data=h,u.data.datasets[1].data=[{x:.5-1/(2*n),y:0},{x:.5+1/(2*n),y:1}],u.update(),c.data.datasets[0].data=[{x:n,y:p}],c.data.datasets[1].data=(0,y.linspace)(0,1.5*n,.01).map(r=>({x:r,y:r*r})),c.options.scales.x.max=1.2*n,c.update();const _=Math.floor(m.length/2);let x=0;for(let r=0;r<_;r++){const b=h[r+1].y,E=h[m.length-1-r].y;x+=(b+E-1)**2}x<1e-10?a.textContent="✅ The match is balanced, player 1 has no advantage over player 2":a.textContent="❌ The match is not balanced, player 1 has an advantage over player 2",s.textContent=`Fairness(Match, 0.5): ${n.toFixed(4)}`,i.innerHTML=`Expected Length(Match, 0.5): ${p.toFixed(4)}`}))})});export default O();
